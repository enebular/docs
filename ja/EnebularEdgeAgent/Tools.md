# Tools

**enebular Reference Board Configuration Tool**（以下: **eRB Config. Tool**）の以下の機能について説明します。

- ログ
- デバッグ出力

**eRB Config. Tool**の概要（動作環境等）については[こちら](Configuration.md)を参照してください。

### Table of Contents

1. [各機能共通のセットアップ](#setup)
1. [ログ](#Log)
1. [デバッグ出力](#DebugOutput)

### 各機能共通のセットアップ {#setup}

**eRB Config. Tool**を使用するためにインストールが必要になります。  
[こちら](https://download.enebular.com/eRB-Config-Tool/eRBConfigTool.msi)からダウンロードし、**eRB Config. Tool**をインストールします。

**eRB Config. Tool**起動後以下の操作を行ってください。

1. 「ポート」からデバイスが接続されているシリアルポートを選択します
1. デバイスとPCをUSBケーブルで接続してください
1. デバイスを `Setting Mode` で起動します。起動時にUSER SWを押したままの状態にします（RESET SWを押した直後にUSER SWを押したままにするとUSER LEDが赤く点灯し、`Setting Mode`で起動します）
    - USER SW、RESET SW、USER LEDの場所については、[RAVEN 各部説明](./../Board/RAVEN.md#parts)を確認してください

## ログ{#Log}

eRB Config. Toolのログは以下の複数の機能から構成されます。

1. [ログ表示](#LogDisplay)
1. [ログ保存](#LogSave)
1. [ログ削除](#LogDelete)

### ログ表示{#LogDisplay}

enebular-edge-agent内に保存されているログファイルを表示することができます。

1. [セットアップ](#setup)を行います
1. **eRB Config. Tool** のロググループにある読み込みボタンを押すと、ログ表示画面が開きログファイル情報が表示されます

### ログ保存{#LogSave}

ログ保存機能は、以下の２種類の保存方法があります。

`ログファイルの保存` は現在表示されているログファイル情報をテキストファイルとして保存します。  
`ログフォルダーの保存` はenebular-edge-agentから読み込んだ全てのログファイル情報をバイナリファイルとして保存します。  

1. [ログファイルの保存](#LogDisplaySave)
1. [ログフォルダーの保存](#LogFolderSave)

#### ログファイルの保存{#LogDisplaySave}

現在ログ表示画面に表示されているログファイル情報をテキストファイルとして保存する機能です。

1. ログ表示画面左下のログファイルの保存を押します
1. ログファイルの保存ダイアログが表示されたら、保存先フォルダーとファイル名を設定し保存ボタンを押します
1. 指定したフォルダーに指定したファイル名で表示中のログファイル情報がテキストファイルとして保存されます

#### ログフォルダーの保存{#LogFolderSave}

enebular-edge-agentから読み込んだ全てのログファイルを保存する機能です。

1. ログ表示画面右下のログフォルダーの保存をクリックします
1. フォルダーの参照ダイアログが表示されたら、保存先フォルダーを選択し、OKボタンを押します
1. 保存先フォルダーにYYYYMMDDhhmmssという名前のフォルダーが作成され、enebular-edge-agentから読み込んだ全てのログファイル情報が保存されます

保存したログフォルダーは以下の手順で表示することができます。

1. **eRB Config. Tool** のロググループにある表示ボタンを押すと、フォルダーの参照ダイアログが表示されるので保存してあるログファイルフォルダーを選択し、OKボタンを押します
1. ログ表示画面が開きログファイル情報が表示されます

### ログ削除{#LogDelete}

enebular-edge-agent内に保存されている全てのログファイル情報を削除する機能です。

1. **eRB Config. Tool** のロググループにある削除ボタンを押すと、確認ダイアログが表示されるので はいボタンを押します
1. enebular-edge-agentからログファイル情報の削除が完了すると削除成功のメッセージボックスが表示されるのでOKボタンを押します


## デバッグ出力{#DebugOutput}

eRB Config. Toolのデバッグ出力は以下の複数の機能から構成されます。

1. [デバッグ出力表示](#DebugDisplay)
1. [デバッグ出力の保存](#DebugOutputSave)


### デバッグ出力表示{#DebugDisplay}

enebular-edge-agentのデバッグ出力を表示する機能です。  
デバッグ出力はデフォルトで無効になっています。切り替え方法は[デバッグ出力の有効化/無効化](#DebugSetting)を参照してください。

1. **eRB Config. Tool** のデバッグ出力グループにある表示ボタンを押します
1. デバッグ出力表示ダイアログが表示され、デバッグメッセージが出力されます
1. デバッグ出力表示中に画面左下の停止ボタンを押すことで、出力の停止を行えます。また、停止ボタンが開始ボタンに切り替わります。
1. デバッグ出力停止中に画面左下の開始ボタンを押すことで、出力の開始を行えます。また、開始ボタンが停止ボタンに切り替わります。

デバッグ出力が開始されると、デバッグ出力表示画面から[デバッグ出力の保存](#DebugOutputSave)を行うことが可能になります。

#### デバッグ出力の有効化/無効化{#DebugSetting}

デバッグ出力の有効/無効を切り替えるには以下の手順を行います。

1. [セットアップ](#setup)を行います
1. **eRB Config. Tool** のデバッグ出力グループにある出力有、または無のラジオボタンを選択します
1. **eRB Config. Tool** のデバッグ出力グループにある書き込みボタンを押します
1. 書き込み成功というメッセージボックスが表示されるので、OKボタンを押します

**eRB Config. Tool** のデバッグ出力グループにある読み込みボタンを押すと現在の設定を読み出すことができます。

### デバッグ出力の保存{#DebugOutputSave}

enebular-edge-agentのデバッグ出力メッセージを保存する機能です。  

1. デバッグ出力表示ダイアログ左下の停止ボタンを押します
1. デバッグ出力表示ダイアログ右下のデバッグ出力の保存ボタンを押します
1. デバッグ出力の保存ダイアログが表示されるので、保存先フォルダーとファイル名を選択し保存ボタンを押します
1. 指定したファイル名でデバッグ出力情報がテキストファイルに保存されます

ファイル名はデフォルトではYYYYMMDDhhmmss.txtとなります。


## トラブルシューティング {#troubleShooting}

### エラーメッセージが出た{#errorMessage}

エラーメッセージの一覧です。下記を参考に対処して下さい。  
また、下記以外のエラーメッセージが出た場合は[こちら](./Configuration.md#errorMessage)を参照してください。

1. enebular-edge-agentがPCとUSBケーブルで接続されていない場合
1. enebular-edge-agentがPCとUSBシリアル通信を行うポートが他のアプリケーションで使用中の場合
1. enebular-edge-agentが設定モードになっていない場合
1. enebular-edge-agentからバージョン情報の取得に失敗した場合
1. enebular-edge-agentのFWバージョンが1.4.0未満の場合
1. enebular-edge-agentにログファイル情報が存在しない場合
1. ログファイル情報を選択しないで、ログ保存を実行した場合
1. デバッグ出力有、無のラジオボタンが選択されていない場合


| メッセージ内容 | 考えられる原因 |
| --- | --- |
| バージョン読み込み失敗、この機能が使用できない可能性があります。 | 1.,2.,3.,4. |
| この機能はバージョン1.4.0以下で使用できません。 | 5. |
| ログがありません。 | 6. |
| ログファイルが選択されていません。選択してからやり直してください。 | 7. |
| 出力設定「有・無」選択されていません。選択してからやり直してください。 | 8. |

